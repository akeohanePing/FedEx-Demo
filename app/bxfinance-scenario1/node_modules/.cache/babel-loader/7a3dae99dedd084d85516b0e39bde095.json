{"ast":null,"code":"import _classCallCheck from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Packages\nimport React from'react';import{withRouter}from\"react-router\";/* PING INTEGRATION: */import{Button,Jumbotron,Row,Col,Card,CardBody,Collapse,Container,Navbar,NavbarToggler,Nav,NavItem,NavLink,Media}from'reactstrap';import{Link,NavLink as RRNavLink,useLocation}from'react-router-dom';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faLinkedinIn,faFacebookF,faTwitter,faInstagram}from'@fortawesome/free-brands-svg-icons';// Components\nimport NavbarMain from'../../components/NavbarMain';import FooterMain from'../../components/FooterMain';import AccountsSubnav from'../../components/AccountsSubnav';import Session from'../../components/Utils/Session';/* PING INTEGRATION: */import PingData from'../../components/Integration/PingData';/* PING INTEGRATION: */import JSONSearch from'../../components/Utils/JSONSearch';/* PING INTEGRATION: */import PingOAuth from'../../components/Integration/PingOAuth';/* PING INTEGRATION: */ // Data\nimport data from'../../data/advisor.json';// Styles\nimport'../../styles/pages/advisor.scss';/* BEGIN PING INTEGRATION: */var updateSelectedUserAndConsent=function updateSelectedUserAndConsent(selectedUser,stateCallback){var sessionObj=new Session();var pingOAuthObj=new PingOAuth();var pingDataObj=new PingData();var newState={fullName:\"\",street:\"\",city:\"\",postalCode:\"\",mobile:\"\",acct_0:0,acct_1:0,acct_2:0};var consentData={};pingOAuthObj.getToken({uid:selectedUser,client:'anywealthadvisorApp',responseType:'',scopes:'urn:pingdirectory:consent'}).then(function(consentToken){pingDataObj.getUserConsentedData(consentToken,\"advisor\").then(function(consentData){if(consentData.Data!==undefined){//In case we have no consent record.\nnewState.acct_0=typeof consentData.Data.Balance[0]!=='undefined'?consentData.Data.Balance[0].Amount.Amount:0;newState.acct_1=typeof consentData.Data.Balance[1]!=='undefined'?consentData.Data.Balance[1].Amount.Amount:0;newState.acct_2=typeof consentData.Data.Balance[2]!=='undefined'?consentData.Data.Balance[2].Amount.Amount:0;stateCallback(newState);}});});//Get the selected users entry in PD.\npingDataObj.getUserEntry(selectedUser).then(function(response){return response.json();}).then(function(jsonResponse){newState.fullName=jsonResponse.cn[0];newState.street=jsonResponse.street[0];newState.city=jsonResponse.l[0];newState.postalCode=jsonResponse.postalCode[0];newState.mobile=jsonResponse.mobile[0];stateCallback(newState);}).catch(function(error){console.error(\"getUserEntry Exception\",error);});};/* END PING INTEGRATION: */ // Autocomplete Suggestion List\nvar SuggestionsList=function SuggestionsList(props){var suggestions=props.suggestions,inputValue=props.inputValue,onSelectSuggestion=props.onSelectSuggestion,displaySuggestions=props.displaySuggestions,selectedSuggestion=props.selectedSuggestion;if(inputValue&&displaySuggestions){if(suggestions.length>0){return/*#__PURE__*/React.createElement(\"ul\",{className:\"suggestions-list\"},suggestions.map(function(suggestion,index){var isSelected=selectedSuggestion===index;var classname=\"suggestion \".concat(isSelected?\"selected\":\"\");return/*#__PURE__*/React.createElement(\"li\",{key:index,className:classname,onClick:function onClick(){return onSelectSuggestion(index);}},suggestion);}));}else{return/*#__PURE__*/React.createElement(\"ul\",{className:\"suggestions-list\"},/*#__PURE__*/React.createElement(\"li\",{className:\"suggestion\"},\"No suggestions available...\"));}}return/*#__PURE__*/React.createElement(\"div\",null);};// Search Autocomplete\nvar SearchAutocomplete=function SearchAutocomplete(props){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),inputValue=_React$useState2[0],setInputValue=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),filteredSuggestions=_React$useState4[0],setFilteredSuggestions=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),selectedSuggestion=_React$useState6[0],setSelectedSuggestion=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),displaySuggestions=_React$useState8[0],setDisplaySuggestions=_React$useState8[1];var onChange=function onChange(event){var value=event.target.value;setInputValue(value);var filteredSuggestions=data.clients.suggestions.filter(function(suggestion){return suggestion.toLowerCase().includes(value.toLowerCase());});setFilteredSuggestions(filteredSuggestions);setDisplaySuggestions(true);};var onSelectSuggestion=function onSelectSuggestion(index){updateSelectedUserAndConsent(filteredSuggestions[index],props.stateCallback);/* PING INTEGRATION: */setSelectedSuggestion(index);//setInputValue(filteredSuggestions[index]); /* PING INTEGRATION: commented this out because we don't want the selected username to persist in the search box.*/\nsetFilteredSuggestions([]);setDisplaySuggestions(false);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"form-search form-inline float-right\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control user-input\",type:\"text\",placeholder:data.clients.search_placeholder,onChange:onChange,value:inputValue}),/*#__PURE__*/React.createElement(SuggestionsList,{inputValue:inputValue,selectedSuggestion:selectedSuggestion,onSelectSuggestion:onSelectSuggestion,displaySuggestions:displaySuggestions,suggestions:filteredSuggestions}),/*#__PURE__*/React.createElement(\"img\",{src:process.env.PUBLIC_URL+\"/images/icons/search.svg\",className:\"img-search\"})));};// AdvisorClient Page\nvar AdvisorClient=/*#__PURE__*/function(_React$Component){_inherits(AdvisorClient,_React$Component);var _super=_createSuper(AdvisorClient);function AdvisorClient(){var _this;_classCallCheck(this,AdvisorClient);_this=_super.call(this);_this.Session=new Session();/* PING INTEGRATION: */_this.PingData=new PingData();/* PING INTEGRATION: */_this.JSONSearch=new JSONSearch();/* PING INTEGRATION: */_this.state={/* PING INTEGRATION: */fullName:\"\",street:\"\",city:\"\",postalCode:\"\",mobile:\"\",acct_0:0,acct_1:0,acct_2:0};_this.updateUserState=_this.updateUserState.bind(_assertThisInitialized(_this));/* PING INTEGRATION: */return _this;}/* BEGIN PING INTEGRATION */ //Callback function: functional components declared (above) outside of main component (here), need to update state in main component.\n_createClass(AdvisorClient,[{key:\"updateUserState\",value:function updateUserState(userObj){var newState={fullName:userObj.fullName,street:userObj.street,city:userObj.city,postalCode:userObj.postalCode,mobile:userObj.mobile,acct_0:userObj.acct_0,acct_1:userObj.acct_1,acct_2:userObj.acct_2};this.setState(newState);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Grab the user passed over from search on the /advisor page.\nvar uid=this.props.location.state.client;updateSelectedUserAndConsent(uid,this.updateUserState);// Getting searchable users from PD.\nthis.PingData.getSearchableUsers({}).then(function(response){return response.json();}).then(function(jsonSearchResults){// Get an array of just uid's from the results.\nvar people=_this2.JSONSearch.findValues(jsonSearchResults._embedded.entries,\"uid\");// Repopulate the data used in SearchAutocomplete().\ndata.clients.suggestions=people.map(function(person){return\"\".concat(person);});}).catch(function(e){console.error(\"getSearchableUsers Exception\",e);});}/* END PING INTEGRATION */},{key:\"render\",value:function render(){var noConsent=this.state.acct_0+this.state.acct_1+this.state.acct_2;return/*#__PURE__*/React.createElement(\"div\",{className:\"accounts advisor\"},/*#__PURE__*/React.createElement(NavbarMain,{data:data}),/*#__PURE__*/React.createElement(\"section\",{className:\"welcome-bar\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\"},/*#__PURE__*/React.createElement(\"p\",null,data.welcome_bar,this.Session.getAuthenticatedUserItem(\"firstName\")))))),/*#__PURE__*/React.createElement(\"section\",{className:\"section-content\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"4\"},/*#__PURE__*/React.createElement(\"h5\",null,data.profile.advisor.title),/*#__PURE__*/React.createElement(Card,{className:\"card-side\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(Media,{left:true,href:\"#\"},/*#__PURE__*/React.createElement(Media,{object:true,src:process.env.PUBLIC_URL+\"/images/anywealthadvisor-photo.png\",alt:\"Generic placeholder image\"})),/*#__PURE__*/React.createElement(Media,{body:true},/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:data.profile.advisor.content}}),/*#__PURE__*/React.createElement(Button,{color:\"link\"},data.profile.advisor.button))))),/*#__PURE__*/React.createElement(\"h5\",{className:\"mt-5\"},data.alerts.title),/*#__PURE__*/React.createElement(Card,{className:\"card-side mb-5\"},/*#__PURE__*/React.createElement(CardBody,null,Object.keys(data.alerts.messages).map(function(key){return/*#__PURE__*/React.createElement(\"p\",{key:key,dangerouslySetInnerHTML:{__html:data.alerts.messages[key]}});}),/*#__PURE__*/React.createElement(Button,{color:\"link\"},data.alerts.button)))),/*#__PURE__*/React.createElement(Col,{lg:\"8\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"mb-4\"},data.clients.title)),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(SearchAutocomplete,{stateCallback:this.updateUserState}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,{className:\"client-detail\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\",className:\"col-side\"},/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(Media,{body:true},/*#__PURE__*/React.createElement(\"strong\",null,this.state.fullName),/*#__PURE__*/React.createElement(\"br\",null),this.state.street,/*#__PURE__*/React.createElement(\"br\",null),this.state.city,\", \",this.state.postalCode,/*#__PURE__*/React.createElement(\"br\",null),\"Mobile: \",this.state.mobile,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},\"See Notes\"),\" | \",/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},\"Modify Records\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\"},data.client_detail.side.button)))),/*#__PURE__*/React.createElement(Col,{md:\"8\",className:\"col-content\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,data.client_detail.content.title)),this.state.acct_0!=0&&/*#__PURE__*/React.createElement(Row,{key:0},/*#__PURE__*/React.createElement(Col,{md:\"8\"},\"BXFinance Checking (Account 1)\"),/*#__PURE__*/React.createElement(Col,{md:\"4\"},this.state.acct_0)),this.state.acct_1!=0&&/*#__PURE__*/React.createElement(Row,{key:1},/*#__PURE__*/React.createElement(Col,{md:\"8\"},\"BXFinance Savings (Account 1)\"),/*#__PURE__*/React.createElement(Col,{md:\"4\"},this.state.acct_1)),this.state.acct_2!=0&&/*#__PURE__*/React.createElement(Row,{key:2},/*#__PURE__*/React.createElement(Col,{md:\"8\"},\"BXFinance Savings (Account 2)\"),/*#__PURE__*/React.createElement(Col,{md:\"4\"},this.state.acct_2)),!noConsent&&/*#__PURE__*/React.createElement(Row,{key:3},/*#__PURE__*/React.createElement(Col,{md:\"8\"},\"This client did not consent\",/*#__PURE__*/React.createElement(\"br\",null),\"to share accounts with you.\"),/*#__PURE__*/React.createElement(Col,{md:\"4\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"mt-3\",dangerouslySetInnerHTML:{__html:data.client_detail.content.links}}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,data.client_detail.content.portfolio_overview)),/*#__PURE__*/React.createElement(\"img\",{src:process.env.PUBLIC_URL+\"/images/advisor-client-chart.png\",className:\"img-fluid\"})),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,data.client_detail.content.portfolio_view)),/*#__PURE__*/React.createElement(\"img\",{src:process.env.PUBLIC_URL+\"/images/advisor-client-pie-chart.png\",className:\"img-fluid\"})))))))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h5\",{className:\"mb-3\"},data.clients_recent.title),/*#__PURE__*/React.createElement(\"p\",{dangerouslySetInnerHTML:{__html:data.clients_recent.content}}),/*#__PURE__*/React.createElement(Button,{color:\"link\"},data.clients_recent.button)))))),/*#__PURE__*/React.createElement(FooterMain,null));}}]);return AdvisorClient;}(React.Component);export default withRouter(AdvisorClient);","map":null,"metadata":{},"sourceType":"module"}