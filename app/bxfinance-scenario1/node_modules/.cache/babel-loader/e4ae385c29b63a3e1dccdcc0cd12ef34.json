{"ast":null,"code":"import _classCallCheck from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrewkeohane/Documents/fedex/BXFinance-Apps/bxfinance-scenario1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Container,Button,Form,FormGroup,Label,Input,Row,Col}from'reactstrap';// Components\nimport NavbarMain from'../../components/NavbarMain';import WelcomeBar from'../../components/WelcomeBar';import FooterMain from'../../components/FooterMain';import AccountsSubnav from'../../components/AccountsSubnav';import AccountsDropdown from'../../components/AccountsDropdown';import CardRewards from'../../components/CardRewards';import Session from'../../components/Utils/Session';/* PING INTEGRATION: */import OpenBanking from'../../components/Integration/OpenBanking';/* PING INTEGRATION: */import{Link}from'react-router-dom';/* PING INTEGRATION: */ // Data\nimport data from'../../data/accounts-transfer.json';// Styles\nimport\"../../styles/pages/pay-transfer/accounts-transfer.scss\";var AccountsTransfer=/*#__PURE__*/function(_React$Component){_inherits(AccountsTransfer,_React$Component);var _super=_createSuper(AccountsTransfer);function AccountsTransfer(props){var _this;_classCallCheck(this,AccountsTransfer);_this=_super.call(this,props);_this.currencyFormat=function(value){return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(value);};_this.state={step:1,xfrAmount:'0',/* PING INTEGRATION: */xfrFailMsg:''};_this.showStep2=_this.showStep2.bind(_assertThisInitialized(_this));_this.showStep3=_this.showStep3.bind(_assertThisInitialized(_this));_this.Session=new Session();/* PING INTEGRATION: */_this.OpenBanking=new OpenBanking();/* PING INTEGRATION: */return _this;}//Formatting dollar amounts to currency for confirmation or deny screens.\n//Defaulting to USA for now.\n//TODO turn into call to GeoLocate component to format according to user's locale.\n_createClass(AccountsTransfer,[{key:\"showStep2\",value:function showStep2(){var _this2=this;var status=this.state.xfrAmount<1000?\"approved\":this.state.xfrAmount>=1000&&this.state.xfrAmount<=100000?\"confirm\":\"denied\";switch(status){case\"approved\":// TODO need error handling and checking status of transfermoney response.\n//TODO since using token from session, need ability to get new token if expired.\nthis.OpenBanking.transferMoney(this.state.xfrAmount,this.Session.getAuthenticatedUserItem(\"AT\")).then(function(response){return response.json();}).then(function(jsonData){if(jsonData.status==\"Money Transferred!\"){_this2.setState({step:3});}else{_this2.setState({step:4});//TODO this needs to be error modal.\n}}).catch(function(error){console.error(\"TransferMoney Exception\",error);});break;case\"confirm\":this.setState({step:2});this.OpenBanking.transferMoney(this.state.xfrAmount,this.Session.getAuthenticatedUserItem(\"AT\")).then(function(response){return response.json();}).then(function(jsonData){if(jsonData.status==\"Money Transferred!\"){_this2.setState({step:3});}else{_this2.setState({xfrFailMsg:\"We did not receive your transaction approval for:\",step:4});//TODO this needs to be error modal.\n}}).catch(function(error){console.error(\"TransferMoney Exception\",error);});break;default:/* Denied */this.setState({xfrFailMsg:\"You have exceeded a transfer limit from:\",step:4});}}},{key:\"showStep3\",value:function showStep3(){/* PING INTEGRATION: commented out. Nothing to do in this case. Just waiting for API response to kick in. \"Confirm\" case above. */ //this.setState({ step: 3 });\n}/* BEGIN PING INTEGRATION: */},{key:\"handleAmountChange\",value:function handleAmountChange(event){var amt=event.target.value;amt=amt.replace(/,/g,'');var dollars=parseFloat(amt).toFixed(2);this.setState({xfrAmount:dollars});}/* END PING INTEGRATION: */},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"accounts accounts-transfer\"},/*#__PURE__*/React.createElement(NavbarMain,null),/*#__PURE__*/React.createElement(WelcomeBar,{firstName:this.Session.getAuthenticatedUserItem(\"firstName\")}),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"div\",{className:\"inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar\"},Object.keys(data.subnav).map(function(key){return/*#__PURE__*/React.createElement(AccountsSubnav,{key:data.subnav[key].title,subnav:data.subnav[key]});}),/*#__PURE__*/React.createElement(CardRewards,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"accounts-hdr\"},/*#__PURE__*/React.createElement(\"h1\",null,data.title),/*#__PURE__*/React.createElement(AccountsDropdown,{text:data.dropdown})),this.state.step==1&&/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-step transfer-step1\"},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"account_from\"},data.form.fields.transfer_from.label),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"account_from\",id:\"account_from\"},/*#__PURE__*/React.createElement(\"option\",null,data.form.fields.transfer_from.placeholder),Object.keys(data.form.fields.transfer_from.options).map(function(key){return/*#__PURE__*/React.createElement(\"option\",{key:data.form.fields.transfer_from.options[key]},data.form.fields.transfer_from.options[key]);})))),/*#__PURE__*/React.createElement(Col,{lg:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"account_to\"},data.form.fields.transfer_to.label),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"account_to\",id:\"account_to\"},/*#__PURE__*/React.createElement(\"option\",null,data.form.fields.transfer_to.placeholder),Object.keys(data.form.fields.transfer_to.options).map(function(key){return/*#__PURE__*/React.createElement(\"option\",{key:data.form.fields.transfer_to.options[key]},data.form.fields.transfer_to.options[key]);}))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:6},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"amount\"},\"Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-currency\"},/*#__PURE__*/React.createElement(Input,{onChange:this.handleAmountChange.bind(this),type:\"text\",name:\"amount\",id:\"amount\"}))))),/*#__PURE__*/React.createElement(Row,{className:\"submit-buttons\"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"text-right\"},/*#__PURE__*/React.createElement(Link,{to:\"/banking\",className:\"text-info cancel\"},data.form.buttons.cancel.label),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"start-transfer\",onClick:this.showStep2},data.form.buttons.start_transfer.label),\" \")))),this.state.step==2&&/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-step transfer-step2\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Okay, let\\u2019s confirm:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-col\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Transfer from:\"),/*#__PURE__*/React.createElement(\"p\",null,\"BXChecking (...4458)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"table-col\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Transfer to:\"),/*#__PURE__*/React.createElement(\"p\",null,\"AnyBank (...5661)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"table-col\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Amount:\"),/*#__PURE__*/React.createElement(\"p\",null,this.currencyFormat(this.state.xfrAmount)))),/*#__PURE__*/React.createElement(\"div\",{className:\"app-approval-banner\"},/*#__PURE__*/React.createElement(\"img\",{src:process.env.PUBLIC_URL+\"/images/icons/phone.jpg\",className:\"img-phone\",alt:\"phone\"}),/*#__PURE__*/React.createElement(\"h3\",null,\"Requires your approval:\"),/*#__PURE__*/React.createElement(\"p\",null,\"This transaction will take place after you approve it using your BXFinance app on iPhone. \",/*#__PURE__*/React.createElement(\"a\",null,\"What is this?\")),/*#__PURE__*/React.createElement(\"img\",{src:process.env.PUBLIC_URL+\"/images/app-store-logos.svg\",className:\"app-store-logos\"})),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,{className:\"submit-buttons\"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"text-right\"},/*#__PURE__*/React.createElement(\"a\",{href:process.env.PUBLIC_URL,className:\"text-info cancel\"},data.form.buttons.cancel.label),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"start-transfer\",onClick:this.showStep3},data.form.buttons.pending_transfer.label))))),this.state.step==3&&/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-step transfer-step3\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Transfer Confirmed\"),/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-col table-col-67\"},/*#__PURE__*/React.createElement(\"h3\",null,\"You have initiated a transfer from:\"),/*#__PURE__*/React.createElement(\"p\",null,\"BXChecking (...4458) to BXSavings (...5661)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"table-col table-col-33\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Amount:\"),/*#__PURE__*/React.createElement(\"p\",null,this.currencyFormat(this.state.xfrAmount)))),/*#__PURE__*/React.createElement(\"p\",null,\"This transaction will take place in 1-2 business days.\"),/*#__PURE__*/React.createElement(\"p\",null,\"Transaction number:\",/*#__PURE__*/React.createElement(\"br\",null),Math.floor(Math.random()*100000)),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,{className:\"submit-buttons\"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"text-right\"},/*#__PURE__*/React.createElement(Link,{to:\"/banking/pay-and-transfer\",className:\"text-link cancel\"},data.form.buttons.close.label),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"start-transfer\",onClick:this.showStep1},data.form.buttons.start_new_transfer.label))))),this.state.step==4&&/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-step transfer-step3\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Transfer Denied\"),/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-col table-col-67\"},/*#__PURE__*/React.createElement(\"h3\",null,this.state.xfrFailMsg),/*#__PURE__*/React.createElement(\"p\",null,\"BXChecking (...4458) to BXSavings (...5661)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"table-col table-col-33\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Amount:\"),/*#__PURE__*/React.createElement(\"p\",{style:{color:'#ff0000'}},this.currencyFormat(this.state.xfrAmount)))),/*#__PURE__*/React.createElement(\"p\",null,\"Please contact a banking representative for transfers of this amount.\"),/*#__PURE__*/React.createElement(\"p\",null,\"Transaction number:\",/*#__PURE__*/React.createElement(\"br\",null),Math.floor(Math.random()*100000000)),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,{className:\"submit-buttons\"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"text-right\"},/*#__PURE__*/React.createElement(Link,{to:\"/banking/pay-and-transfer\",className:\"text-link cancel\"},data.form.buttons.close.label),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"start-transfer\",onClick:this.showStep1},data.form.buttons.start_new_transfer.label)))))))),/*#__PURE__*/React.createElement(FooterMain,null));}}]);return AccountsTransfer;}(React.Component);export default AccountsTransfer;","map":null,"metadata":{},"sourceType":"module"}